<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nepali to English Date Converter</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background from original converter */
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            font-sans: sans-serif; /* Ensure font-sans is applied */
        }
        /* Styles adapted from the original date converter for form elements */
        .container-card {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); /* Deeper shadow */
            /* Padding for the container-card is now handled by Tailwind classes below */
            width: 100%;
            text-align: center;
        }
        .input-field {
            border: 1px solid #cbd5e1; /* Slate-300 border */
            border-radius: 0.75rem; /* Rounded input fields */
            padding: 0.75rem 1rem;
            font-size: 1rem;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6; /* Blue-500 on focus */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); /* Light blue ring on focus */
        }
        .convert-button {
            background: linear-gradient(to right, #3b82f6, #2563eb); /* Blue gradient */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); /* Shadow for button */
            width: 100%; /* Make button full width */
        }
        .convert-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
        }
        .result-box {
            background-color: #e0f2fe; /* Light blue background for result */
            border: 1px solid #93c5fd; /* Blue-300 border */
            border-radius: 0.75rem;
            padding: 1rem;
            font-size: 1.125rem;
            font-weight: 500;
            color: #1e40af; /* Darker blue text */
        }
        .error-message {
            color: #ef4444; /* Red-500 for errors */
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="h-screen w-screen flex items-center justify-center bg-gray-100 relative font-sans">
    <!-- Main content container: full width on small screens, 1/3 width on medium screens and up -->
    <div class="flex flex-col w-full md:w-1/3 h-screen relative shadow-lg rounded-xl overflow-hidden">
        <!-- Header -->
        <header class="h-[10vh] flex items-center justify-center border bg-[radial-gradient(circle,_rgba(0,0,0,0.3)_1px,_transparent_1px)] bg-[size:10px_10px] relative">
            <!-- Title moved to main content area -->
        </header>
        <!-- Body -->
        <main class="h-[80vh] border bg-[radial-gradient(circle,_rgba(0,0,0,0.3)_1px,_transparent_1px)] bg-[size:10px_10px] flex items-center justify-center p-4 overflow-auto relative">
            <!-- Converter UI -->
            <div class="w-full h-full p-4 text-center container-card flex flex-col justify-center items-center">
                <!-- Title inside the converter UI -->
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6 text-left w-full">Nepali to English Date Converter</h1>

                <div class="space-y-4 mb-6 w-full">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="number" id="nepaliYear" placeholder="Year (e.g., 2080)" class="input-field w-full" min="1970" max="2090">
                        <input type="number" id="nepaliMonth" placeholder="Month (1-12)" class="input-field w-full" min="1" max="12">
                        <input type="number" id="nepaliDay" placeholder="Day (1-32)" class="input-field w-full" min="1" max="32">
                    </div>
                    <p id="errorMessage" class="error-message hidden"></p>
                </div>

                <button id="convertBtn" class="convert-button w-full mb-6">Convert to English Date</button>

                <div id="resultContainer" class="result-box hidden w-full">
                    <p class="text-gray-700">English Date:</p>
                    <p id="englishDate" class="font-bold"></p>
                </div>
            </div>
        </main>
        <!-- Footer -->
        <footer class="h-[10vh] border bg-[radial-gradient(circle,_rgba(0,0,0,0.3)_1px,_transparent_1px)] bg-[size:10px_10px] flex items-center justify-center p-2">
            <p class="text-white text-sm">Â© 2024 Nepali Date Converter</p>
        </footer>
    </div>

    <!-- Nepali Datetime Library -->
    <script type="module">
        // Import the NepaliDatetime class
        import NepaliDatetime from 'https://cdn.jsdelivr.net/npm/nepali-datetime@1.4.1/+esm';

        const nepaliYearInput = document.getElementById('nepaliYear');
        const nepaliMonthInput = document.getElementById('nepaliMonth');
        const nepaliDayInput = document.getElementById('nepaliDay');
        const convertBtn = document.getElementById('convertBtn');
        const englishDateDisplay = document.getElementById('englishDate');
        const resultContainer = document.getElementById('resultContainer');
        const errorMessageDisplay = document.getElementById('errorMessage');

        convertBtn.addEventListener('click', () => {
            const year = parseInt(nepaliYearInput.value);
            // Convert user's 1-indexed month to 0-indexed for NepaliDatetime constructor
            const month = parseInt(nepaliMonthInput.value) - 1; 
            const day = parseInt(nepaliDayInput.value);

            // Clear previous messages and results
            errorMessageDisplay.classList.add('hidden');
            resultContainer.classList.add('hidden');
            englishDateDisplay.textContent = '';

            // Basic validation for input ranges
            if (isNaN(year) || isNaN(month) || isNaN(day) || 
                year < 1970 || year > 2090 || 
                month < 0 || month > 11 || // Month range for 0-indexed is 0-11
                day < 1 || day > 32) { 
                errorMessageDisplay.textContent = 'Please enter valid Nepali year (1970-2090), month (1-12), and day (1-32).';
                errorMessageDisplay.classList.remove('hidden');
                return;
            }

            try {
                // Create a NepaliDatetime object with 0-indexed month
                const nepaliDate = new NepaliDatetime(year, month, day);

                // Get the equivalent JavaScript Date object
                const englishJsDate = nepaliDate.getDateObject();

                // Manually format the JavaScript Date object
                const enYear = englishJsDate.getFullYear();
                const enMonth = englishJsDate.getMonth() + 1; // getMonth() returns 0-indexed, so add 1
                const enDay = englishJsDate.getDate();

                const formattedEnglishDate = `${enYear}-${String(enMonth).padStart(2, '0')}-${String(enDay).padStart(2, '0')}`;

                englishDateDisplay.textContent = formattedEnglishDate;
                resultContainer.classList.remove('hidden');
            } catch (error) {
                // Handle errors from the library (e.g., invalid date combination)
                errorMessageDisplay.textContent = `Error converting date: ${error.message}. Please check the Nepali date.`;
                errorMessageDisplay.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>
